<?xml version="1.0" encoding="utf-8"?>
<!-- This URDF was automatically created by SolidWorks to URDF Exporter! Originally created by Stephen Brawner (brawner@gmail.com) 
     Commit Version: 1.6.0-1-g15f4949  Build Version: 1.6.7594.29634
     For more information, please see http://wiki.ros.org/sw_urdf_exporter -->
<robot
  name="hunter2_base" xmlns:xacro="http://www.ros.org/wiki/xacro">
  <xacro:include filename="inertial_macros.xacro"/>

  <material name="white">
    <color rgba="1 1 1 1"/>
</material>

<material name="orange">
    <color rgba="1 0.3 0.1 1"/>
</material>

<material name="blue">
    <color rgba="0.2 0.2 1 1"/>
</material>

<material name="black">
    <color rgba="0 0 0 1"/>
</material>

<material name="red">
    <color rgba="1 0 0 1"/>
</material>

  <link
    name="base_link">
    <inertial>
      <origin
        xyz="0.0266989327622036 0.000409203500587652 -0.135901124750884"
        rpy="0 0 0" />
      <mass
        value="21.02945169536679" />
      <inertia
        ixx="0.0332370959804736"
        ixy="-1.013150489971E-06"
        ixz="-0.00188859201421112"
        iyy="0.111072002332437"
        iyz="-5.13308150598312E-07"
        izz="0.12660862809283" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://hunter_sim_pkg/mesh/meshes/base_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://hunter_sim_pkg/mesh/meshes/base_link.STL" />
      </geometry>
    </collision>
  </link>

  <gazebo reference="base_link"> 
    <kp>1000000.0</kp>  
    <kd>0.1</kd> 
    <dampingFactor>0</dampingFactor> 
    <material>Gazebo/White</material> 
    <selfCollide>true</selfCollide> 
    <turnGravityOff>false</turnGravityOff> 
    <mu1 value="0.5"/> 
    <mu2 value="0.5"/> 
    <fdir1 value="0 0 0"/> 
  </gazebo>

  <link
    name="front_steer_left_link">
    <inertial>
      <origin
        xyz="-0.012614 1.8116E-05 0.0023132"
        rpy="0 0 0" />
      <mass
        value="7.8526" />
      <inertia
        ixx="0.063827"
        ixy="0"
        ixz="0"
        iyy="0.063827"
        iyz="0"
        izz="0.11091" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
      <cylinder length="0.001" radius="0.005"/>
      </geometry>
      <material
        name="">
        <color
          rgba="0.79216 0.81961 0.93333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
      <cylinder length="0.001" radius="0.005"/>
      </geometry>
    </collision>
  </link>
  <joint
    name="front_steer_left_joint"
    type="revolute">
    <origin
      xyz="0.37142 0.29199 -0.1955"
      rpy="1.5708 0 0" />
    <parent
      link="base_link" />
    <child
      link="front_steer_left_link" />
    <axis
      xyz="0 1 0" />
    <limit
      lower="-0.69"
      upper="0.69"
      effort="0"
      velocity="0" />
  </joint>
  <gazebo reference="front_steer_left_link"> 
        <mu1 value="0.5"/> 
        <mu2 value="0.5"/> 
        <kp  value="10000000.0" /> 
        <kd  value="1.0" /> 
        <fdir1 value="0 1 0"/> 
        <material>Gazebo/Blue</material> 
      </gazebo>
  <link
    name="front_left_wheel_link">
    <inertial>
      <origin
        xyz="-6.5774E-06 2.0242E-05 -0.0096386"
        rpy="0 0 0" />
      <mass
        value="7.7007" />
      <inertia
        ixx="0.063724"
        ixy="0"
        ixz="0"
        iyy="0.063724"
        iyz="0"
        izz="0.11072" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://hunter_sim_pkg/mesh/meshes/front_left_wheel_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.79216 0.81961 0.93333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://hunter_sim_pkg/mesh/meshes/front_left_wheel_link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="front_left_wheel_joint"
    type="continuous">
    <origin
      xyz="0 0 0"
      rpy="0 0 0" />
    <parent
      link="front_steer_left_link" />
    <child
      link="front_left_wheel_link" />
    <axis
      xyz="0 0 -1" />
      <dynamics damping="0.0" friction="15"/>
  </joint>

  <gazebo reference="front_left_wheel_link"> 
    <mu1 value="0.5"/> 
    <mu2 value="0.5"/> 
    <kp  value="10000000.0" /> 
    <kd  value="1.0" /> 
    <fdir1 value="0 1 0"/> 
    <material>Gazebo/Blue</material> 
  </gazebo>

  <link
    name="front_steer_right_link">
    <inertial>
      <origin
        xyz="-8.9374E-08 1.0997E-07 0.0095958"
        rpy="0 0 0" />
      <mass
        value="7.696" />
      <inertia
        ixx="0.063704"
        ixy="0"
        ixz="0"
        iyy="0.063704"
        iyz="0"
        izz="0.11068" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
      <cylinder length="0.001" radius="0.005"/>
      </geometry>
      <material
        name="">
        <color
          rgba="0.79216 0.81961 0.93333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
      <cylinder length="0.001" radius="0.005"/>
      </geometry>
    </collision>
  </link>
  <joint
    name="front_steer_right_joint"
    type="revolute">
    <origin
      xyz="0.37142 -0.29201 -0.1955"
      rpy="1.5708 0 0" />
    <parent
      link="base_link" />
    <child
      link="front_steer_right_link" />
    <axis
      xyz="0 1 0" />
    <limit
      lower="-0.69"
      upper="0.69"
      effort="0"
      velocity="0" />
  </joint>

  <gazebo reference="front_steer_right_link"> 
    <mu1 value="0.5"/> 
    <mu2 value="0.5"/> 
    <kp  value="10000000.0" /> 
    <kd  value="1.0" /> 
    <fdir1 value="0 1 0"/> 
    <material>Gazebo/Blue</material> 
  </gazebo>

  <link
    name="front_right_wheel_link">
    <inertial>
      <origin
        xyz="-9.1148E-08 1.1284E-07 0.0095049"
        rpy="0 0 0" />
      <mass
        value="7.5613" />
      <inertia
        ixx="0.063626"
        ixy="0"
        ixz="0"
        iyy="0.063626"
        iyz="0"
        izz="0.11054" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 3.14 0" />
      <geometry>
        <mesh
          filename="package://hunter_sim_pkg/mesh/meshes/front_left_wheel_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.79216 0.81961 0.93333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://hunter_sim_pkg/mesh/meshes/front_right_wheel_link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="front_right_wheel_joint"
    type="continuous">
    <origin
      xyz="0 0 0"
      rpy="0 0 0" />
    <parent
      link="front_steer_right_link" />
    <child
      link="front_right_wheel_link" />
    <axis
      xyz="0 0 -1" />
      <dynamics damping="0.0" friction="15"/>
  </joint>

  <gazebo reference="front_right_wheel_link"> 
    <mu1 value="0.5"/> 
    <mu2 value="0.5"/> 
    <kp  value="10000000.0" /> 
    <kd  value="1.0" /> 
    <fdir1 value="0 1 0"/> 
    <material>Gazebo/Blue</material> 
  </gazebo>

  <link
    name="left_rear_link">
    <inertial>
      <origin
        xyz="-8.826E-05 6.4342E-05 -0.0096491"
        rpy="0 0 0" />
      <mass
        value="7.6692" />
      <inertia
        ixx="0.063699"
        ixy="0"
        ixz="0"
        iyy="0.063699"
        iyz="0"
        izz="0.11067" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://hunter_sim_pkg/mesh/meshes/left_rear_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.79216 0.81961 0.93333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://hunter_sim_pkg/mesh/meshes/left_rear_link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="left_rear_joint"
    type="continuous">
    <origin
      xyz="-0.28 0.29249 -0.19558"
      rpy="1.5708 0 0" />
    <parent
      link="base_link" />
    <child
      link="left_rear_link" />
    <axis
      xyz="0 0 -1" />
     <dynamics damping="0.0" friction="15"/>
  </joint>

  <gazebo reference="left_rear_link"> 
    <mu1 value="0.5"/> 
    <mu2 value="0.5"/> 
    <kp  value="10000000.0" /> 
    <kd  value="1.0" /> 
    <fdir1 value="0 1 0"/> 
    <material>Gazebo/Blue</material> 
  </gazebo>

  <link
    name="right_rear_link">
    <inertial>
      <origin
        xyz="8.6344E-05 7.4488E-05 0.0097824"
        rpy="0 0 0" />
      <mass
        value="7.7133" />
      <inertia
        ixx="0.06373"
        ixy="0"
        ixz="0"
        iyy="0.06373"
        iyz="0"
        izz="0.11073" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://hunter_sim_pkg/mesh/meshes/right_rear_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.79216 0.81961 0.93333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://hunter_sim_pkg/mesh/meshes/right_rear_link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="right_rear_joint"
    type="continuous">
    <origin
      xyz="-0.28018 -0.29251 -0.19558"
      rpy="1.5708 0.0026575 0" />
    <parent
      link="base_link" />
    <child
      link="right_rear_link" />
    <axis
      xyz="0 0 -1" />
     <dynamics damping="0.0" friction="15"/>
  </joint>

  <gazebo reference="right_rear_link"> 
    <mu1 value="0.5"/> 
    <mu2 value="0.5"/> 
    <kp  value="10000000.0" /> 
    <kd  value="1.0" /> 
    <fdir1 value="0 1 0"/> 
    <material>Gazebo/Blue</material> 
  </gazebo>

  <link
    name="front_steer_link">
    <inertial>
      <origin
        xyz="0.049836 8.1046E-15 0.017912"
        rpy="0 0 0" />
      <mass
        value="0.0049179" />
      <inertia
        ixx="1.6846E-07"
        ixy="7.6396E-23"
        ixz="-1.0974E-08"
        iyy="7.549E-07"
        iyz="-1.8957E-22"
        izz="7.334E-07" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
      <cylinder length="0.001" radius="0.005"/>
      </geometry>
      <material
        name="">
        <color
          rgba="0.79216 0.81961 0.93333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
      <cylinder length="0.001" radius="0.005"/>
      </geometry>
    </collision>
  </link>
  <joint
    name="front_steer_joint"
    type="revolute">
    <origin
      xyz="0.44792 -1.1431E-05 -0.121"
      rpy="0 0 0" />
    <parent
      link="base_link" />
    <child
      link="front_steer_link" />
    <axis
      xyz="0 0 1" />
    <limit
      lower="-0.72"
      upper="0.72"
      effort="0"
      velocity="0" />
  </joint>

  <gazebo reference="front_steer_link"> 
    <mu1 value="0.5"/> 
    <mu2 value="0.5"/> 
    <kp  value="10000000.0" /> 
    <kd  value="1.0" /> 
    <fdir1 value="0 1 0"/> 
    <material>Gazebo/Blue</material> 
  </gazebo>

  <link
    name="rear_wheel_link">
    <inertial>
      <origin
        xyz="-0.02 0.0031269 -0.12735"
        rpy="0 0 0" />
      <mass
        value="0.0049179" />
      <inertia
        ixx="1.1821E-06"
        ixy="9.6965E-13"
        ixz="-3.1553E-12"
        iyy="9.5276E-07"
        iyz="1.2428E-08"
        izz="1.0913E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
      <cylinder length="0.001" radius="0.005"/>
      </geometry>
      <material
        name="">
        <color
          rgba="1 1 1 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
      <cylinder length="0.001" radius="0.005"/>
      </geometry>
    </collision>
  </link>
  <joint
    name="rear_wheel_joint"
    type="continuous">
    <origin
      xyz="-0.42408 -1.1431E-05 -0.085581"
      rpy="0.0032313 0 0" />
    <parent
      link="base_link" />
    <child
      link="rear_wheel_link" />
    <axis
      xyz="0 0 1" />
    <dynamics damping="0.0" friction="15"/>
  </joint>

  <gazebo reference="rear_wheel_link"> 
    <mu1 value="0.5"/> 
    <mu2 value="0.5"/> 
    <kp  value="10000000.0" /> 
    <kd  value="1.0" /> 
    <fdir1 value="0 1 0"/> 
    <material>Gazebo/Blue</material> 
  </gazebo>

  <joint name="lidar_joint" type="fixed">
    <parent link="base_link"/>
    <child link="laser_frame"/>
    <origin xyz="0.5 0 0.6" rpy="0 0 0"/>
</joint>

<link name="laser_frame">
    <visual>
        <geometry>
            <cylinder radius="0.05" length="0.04"/>
        </geometry>
            <material name="red"/>
    </visual>
    <collision>
        <geometry>
            <cylinder radius="0.05" length="0.04"/>
        </geometry>
    </collision>
    <xacro:inertial_cylinder mass="0.1" length="0.04" radius="0.05">
        <origin xyz="0 0 0" rpy="0 0 0"/>
    </xacro:inertial_cylinder>
</link>

<gazebo reference="laser_frame">
    <material>Gazebo/Red</material>
    <sensor name="laser" type="ray">
        <pose>0 0 0 0 0 0</pose>
        <visualize>true</visualize>
        <update_rate>10</update_rate>
        <ray>
            <scan>
                <horizontal>
                    <samples>800</samples>
                    <min_angle>-2.01</min_angle>
                    <max_angle>2.01</max_angle>
                </horizontal>
            </scan>
            <range>
                <min>0.3</min>
                <max>12</max>
                <resolution>0.01</resolution>
            </range>
        </ray>
        <plugin name="laser_controller" filename="libgazebo_ros_ray_sensor.so">
            <ros>
                <argument>~/out:=scan</argument>
            </ros>
            <output_type>sensor_msgs/LaserScan</output_type>
            <frame_name>laser_frame</frame_name>
        </plugin>
    </sensor>
</gazebo>

  <joint name="gps_joint" type="fixed">
    <parent link="base_link"/>
    <child link="gps_frame"/>
    <origin xyz="0 0 0.6" rpy="0 0 0"/>
</joint>

<link name="gps_frame">
    <visual>
        <geometry>
            <cylinder radius="0.05" length="0.04"/>
        </geometry>
            <material name="red"/>
    </visual>
    <collision>
        <geometry>
            <cylinder radius="0.05" length="0.04"/>
        </geometry>
    </collision>
    <xacro:inertial_cylinder mass="0.1" length="0.04" radius="0.05">
        <origin xyz="0 0 0" rpy="0 0 0"/>
    </xacro:inertial_cylinder>
</link>

<gazebo reference="gps_frame">
    <material>Gazebo/Red</material>
    <sensor name="tb3_gps" type="gps">
        <always_on>true</always_on>
        <update_rate>1</update_rate>
        <pose>0 0 0 0 0 0</pose>
        <visualize>true</visualize>
        <gps>
          <position_sensing>
            <horizontal>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>0.01</stddev>
              </noise>
            </horizontal>
            <vertical>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>0.01</stddev>
              </noise>
            </vertical>
          </position_sensing>
        </gps>
        <plugin name="my_gps_plugin" filename="libgazebo_ros_gps_sensor.so">
          <ros>
            <remapping>~/out:=/gps/fix</remapping>
          </ros>
        </plugin>
      </sensor>
</gazebo>

<link name="imu_link">
  <visual>
    <geometry>
      <box size="0.1 0.1 0.1"/>
    </geometry>
  </visual>
  
  <collision>
    <geometry>
      <box size="0.1 0.1 0.1"/>
    </geometry>
  </collision>
  
  <xacro:inertial_cylinder mass="0.1" length="0.04" radius="0.05">
      <origin xyz="0 0 0" rpy="0 0 0"/>
  </xacro:inertial_cylinder>
</link>
  
<joint name="imu_joint" type="fixed">
  <parent link="base_link"/>
  <child link="imu_link"/>
  <origin xyz="0 0 0.01"/>
</joint>
  
<gazebo reference="imu_link">
  <sensor name="imu_sensor" type="imu">
    <plugin filename="libgazebo_ros_imu_sensor.so" name="imu_plugin">
      <ros>
        <remapping>~/out:=imu</remapping>
      </ros>
      <initial_orientation_as_reference>false</initial_orientation_as_reference>
    </plugin>
    <always_on>true</always_on>
    <update_rate>100</update_rate>
    <visualize>true</visualize>
   <imu>
       <angular_velocity>
         <x>
           <noise type="gaussian">
            <mean>0.0</mean>
            <stddev>2e-4</stddev>
            <bias_mean>0.0000075</bias_mean>
            <bias_stddev>0.0000008</bias_stddev>
          </noise>
        </x>
        <y>
          <noise type="gaussian">
            <mean>0.0</mean>
            <stddev>2e-4</stddev>
            <bias_mean>0.0000075</bias_mean>
            <bias_stddev>0.0000008</bias_stddev>
          </noise>
        </y>
        <z>
          <noise type="gaussian">
            <mean>0.0</mean>
            <stddev>2e-4</stddev>
            <bias_mean>0.0000075</bias_mean>
            <bias_stddev>0.0000008</bias_stddev>
          </noise>
        </z>
      </angular_velocity>
      <linear_acceleration>
        <x>
          <noise type="gaussian">
            <mean>0.0</mean>
            <stddev>1.7e-2</stddev>
            <bias_mean>0.1</bias_mean>
            <bias_stddev>0.001</bias_stddev>
          </noise>
        </x>
        <y>
          <noise type="gaussian">
            <mean>0.0</mean>
            <stddev>1.7e-2</stddev>
            <bias_mean>0.1</bias_mean>
            <bias_stddev>0.001</bias_stddev>
          </noise>
        </y>
        <z>
          <noise type="gaussian">
            <mean>0.0</mean>
            <stddev>1.7e-2</stddev>
            <bias_mean>0.1</bias_mean>
            <bias_stddev>0.001</bias_stddev>
          </noise>
        </z>
      </linear_acceleration>
    </imu>
  </sensor>
</gazebo>

<ros2_control name="gazebosystem" type="system">

  <hardware>
      <plugin>gazebo_ros2_control/GazeboSystem</plugin>
  </hardware>

  <joint name="front_steer_left_joint">
      <command_interface name="position">
          <param name="min">-10</param>
          <param name="max">10</param>
      </command_interface>
      <state_interface name="position"/>
  </joint>

  <joint name="front_steer_right_joint">
      <command_interface name="position">
          <param name="min">-10</param>
          <param name="max">10</param>
      </command_interface>
      <state_interface name="position"/>
  </joint>

  <joint name="front_left_wheel_joint">
      <command_interface name="velocity">
          <param name="min">-10</param>
          <param name="max">10</param>
      </command_interface>
      <state_interface name="velocity"/>
      <state_interface name="position"/>
  </joint>

  <joint name="front_right_wheel_joint">
      <command_interface name="velocity">
          <param name="min">-10</param>
          <param name="max">10</param>
      </command_interface>
      <state_interface name="velocity"/>
      <state_interface name="position"/>
  </joint>

  <joint name="left_rear_joint">
      <command_interface name="velocity">
          <param name="min">-10</param>
          <param name="max">10</param>
      </command_interface>
      <state_interface name="velocity"/>
      <state_interface name="position"/>
  </joint>

  <joint name="right_rear_joint">
      <command_interface name="velocity">
          <param name="min">-10</param>
          <param name="max">10</param>
      </command_interface>
      <state_interface name="velocity"/>
      <state_interface name="position"/>
  </joint>
</ros2_control>

<gazebo>
  <plugin name="gazebo_ros2_control" filename="libgazebo_ros2_control.so">
      <ros>
          <remapping>ack_cont/odometry:=odom</remapping>
          <remapping>ack_cont/tf_odometry:=tf</remapping> 
          <remapping>ack_cont/reference_unstamped:=cmd_vel</remapping>
          <!-- <remapping>ack_cont/reference_unstamped:=cmd_vel</remapping> -->
      </ros>
      <parameters>$(find hunter_sim_pkg)/config/my_controllers.yaml</parameters>
      <parameters>$(find hunter_sim_pkg)/config/gaz_ros2_ctl_use_sim.yaml</parameters>
  </plugin>
</gazebo>
</robot>
